window.onload=async function(){const e=[0,35,367,423,1186,2565,4845],{total_co2:t,green_step:o}=await(async()=>{const e=await fetch("https://api-co2.cubbit.io/saved"),t=await e.json(),{total_co2:o,green_step:n}=t;return console.log(t),{total_co2:o,green_step:n}})();if(t&&document.querySelectorAll(".total_co2").forEach(((e,o)=>{e.innerHTML=t})),o){document.querySelectorAll(".dot").forEach(((e,t)=>{t<o&&e.classList.add("completed"),t===o&&e.classList.add("load")}));const n=()=>0===o?0:(o+(t-e[o])/(e[o+1]-e[o]))/(e.length-1)*100;document.getElementById("co2_progress_bar").style.width=`calc(${n()}% + 10px)`}Webflow.push((()=>{if("/"===window.location.pathname||"/it"===window.location.pathname){const e=document.getElementById("email"),t=document.getElementById("consent_check"),o=document.getElementById("submit"),n=document.getElementById("errorMsg");t.checked||(o.disabled=!0),t.addEventListener("change",(()=>{t.checked?o.disabled=!1:o.disabled=!0})),o.addEventListener("click",(async o=>{if(!t.value)return o.preventDefault(),void(n.innerHTML="Please accept the consent");if(!e.value)return o.preventDefault(),void(n.innerHTML="Please enter your email");const r={email:e.value,referral_code:""},i=await fetch("https://api-co2.cubbit.io/save",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Accept:"application/json"}}),a=await i.json();if(!a)throw n.innerHTML="Something went wrong",new Error(i.statusText);if(a?.error)throw n.innerHTML=a.message,new Error(a.error);window.location.href=`/thank-you?referral_code=${a.referral_code}`}))}})),Webflow.push((()=>{if(-1!==window.location.pathname.indexOf("/thank-you")){const e=window.location.search.split("=")[1],t={fbShareLink:`https://www.facebook.com/sharer/sharer.php?u=https://cubbit.io?referral_code=${e}&quote=I%20just%20saved%20${e}%20CO2%20from%20the%20environment%20by%20using%20Cubbit.io%20and%20I%20can%20help%20you%20save%20CO2%20too.%20Check%20it%20out%20here%3A%20https://cubbit.io?referral_code=${e}`,twShareLink:`https://twitter.com/intent/tweet?text=I%20just%20saved%20${e}%20CO2%20from%20the%20environment%20by%20using%20Cubbit.io%20and%20I%20can%20help%20you%20save%20CO2%20too.%20Check%20it%20out%20here%3A%20https://cubbit.io?referral_code=${e}`,liShareLink:`https://www.linkedin.com/sharing/share-offsite/?url=https://cubbit.io?referral_code=${e}`,reShareLink:`https://www.reddit.com/submit?url=https://cubbit.io?referral_code=${e}&title=I%20just%20saved%20${e}%20CO2%20from%20the%20environment%20by%20using%20Cubbit.io%20and%20I%20can%20help%20you%20save%20CO2%20too.%20Check%20it%20out%20here%3A%20https://cubbit.io?referral_code=${e}`,emailShareLink:`mailto:?subject=I%20just%20saved%20${e}%20CO2%20from%20the%20environment%20by%20using%20Cubbit.io%20and%20I%20can%20help%20you%20save%20CO2%20too.%20Check%20it%20out%20here%3A%20https://cubbit.io?referral_code=${e}`},o=e=>{switch(e){case"fbShareLink":return"facebook";case"twShareLink":return"twitter";case"liShareLink":return"linkedin";case"reShareLink":return"reddit";case"emailShareLink":return"email";default:return""}},n=async t=>{const n=o(t),r=await fetch("https://api-co2.cubbit.io/save-social",{method:"POST",body:JSON.stringify({email:e,social_media:n,amount:1}),headers:{"Content-Type":"application/json",Accept:"application/json"}}),i=await r.json();if(i.error)throw new Error(i.error);return i};Object.keys(t).forEach((e=>{document.getElementById(e).addEventListener("click",(()=>{window.open(t[e],"_blank");const o=n(e);o&&console.log(o)}))}))}}))};