window.onload=async function(){const t=document.getElementById("form"),e=[0,35,367,423,1186,2565,4845],{total_co2:o,green_step:a}=await(async()=>{const t=await fetch("https://api-co2.cubbit.io/saved"),e=await t.json(),{total_co2:o,green_step:a}=e;return console.log(e),{total_co2:o,green_step:a}})();if(o&&document.querySelectorAll(".total_co2").forEach(((t,e)=>{t.innerHTML=o})),a){document.querySelectorAll(".dot").forEach(((t,e)=>{e<a&&t.classList.add("completed"),e===a&&t.classList.add("load")}));const t=()=>0===a?0:(a+(o-e[a])/(e[a+1]-e[a]))/(e.length-1)*100;document.getElementById("co2_progress_bar").style.width=`calc(${t()}% + 10px)`}Webflow.push((()=>{t.addEventListener("submit",(async t=>{t.preventDefault();const e={email:document.getElementById("email").value,amount:1,signup:!0,referral_code:""},o=await fetch("https://api-co2.cubbit.io/save",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(o.statusText);const a=await o.json();window.location.href=`thank-you?referral_code=${a}`}))}))};