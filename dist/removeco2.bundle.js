window.onload=async function(){const e=["https://uploads-ssl.webflow.com/611f84142709f0e312100b42/623c83e61e8699c260fe8cde_train.svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c0e5db4a2394af922a51a_mail.svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c0e5db81c1e04e19e3424_laptop.svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c0f3879cf7742ff8e3078_socials.svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c0f3e7646a8334f683920_power.svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c0f3e2dec4192dbb3e935_car.svg"],t=[0,35,367,423,1186,2565,4845],o=document.getElementById("loader"),r=new URLSearchParams(window.location.search).get("referral_code"),a={"Content-Type":"application/json",Accept:"application/json","x-co2-challenge-lng":Weglot.getCurrentLang()},{total_co2:c,green_step:n}=await(async()=>{const e=await fetch("https://api-co2.cubbit.io/saved"),t=await e.json(),{total_co2:o,green_step:r}=t;return console.log(t),{total_co2:o,green_step:r}})();if(c&&document.querySelectorAll(".total_co2").forEach(((e,t)=>{e.innerHTML=c})),o.style.display="none",n){document.querySelector(".hackathon-img").src=e[n];const o=document.querySelectorAll(".hackton-grid-image"),r=["https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c273dff47c67894b03b01_noun-train-1951016%202.svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c273dfdfe85eabfded048_noun-news-518193%201%20(1).svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c273dcbe2287aa77f7912_noun-laptop-1113563%201%20(1).svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c273d256b60c2275a8178_Vector%20(5).svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c273d21ad2318360f077a_Vector%20(6).svg","https://uploads-ssl.webflow.com/611f84142709f0e312100b42/624c273d7fda693e5bd5ffc1_noun-car-1069217%201%20(1).svg]"];for(let e=0;e<n;e++)o[e].src=r[e];document.querySelectorAll(".dot").forEach(((e,t)=>{t<n&&e.classList.add("completed"),t==n&&e.classList.add("load")}));const a=()=>{const e=(o=(c-t[n])/(t[n+1]-t[n]),0===n?4*o/100:16.6*o/100);var o;const r=(e=>0===e?0:1===e?.04:(4+16.6*(e-1))/100)(n)+e;return console.log(r),r};console.log(a()),document.getElementById("co2_progress_bar").style.width=100*a()+"%"}Webflow.push((()=>{if("/removemyco2"===window.location.pathname||"/it/removemyco2"===window.location.pathname){const e=document.getElementById("email"),t=document.getElementById("consent_check"),o=document.getElementById("submit"),c=document.getElementById("errorMsg");t.checked||(o.disabled=!0),e.addEventListener("keyup",(e=>{13===e.keyCode&&(e.preventDefault(),n(e))}));const n=async o=>{if(o.preventDefault(),!t.value)return o.preventDefault(),void(c.innerHTML="Please accept the consent");if(!e.value)return o.preventDefault(),void(c.innerHTML="Please enter your email");const n={email:e.value,referral_code:r||""},s=await fetch("https://api-co2.cubbit.io/save",{method:"POST",body:JSON.stringify(n),headers:a}),l=await s.json();if(!l)throw c.innerHTML="Something went wrong",new Error(s.statusText);if(l?.error)throw c.innerHTML=l.message,new Error(l.error);window.location.href=`./removemyco2/cubbit-partners-with-treedom?referral_code=${l.referral_code}`};o.addEventListener("click",n)}})),Webflow.push((async()=>{if(-1!==window.location.pathname.indexOf("/cubbit-partners-with-treedom")){r||(window.location.href="/removemyco2");const{total_co2_user:e}=await(async e=>{const t=await fetch(`https://api-co2.cubbit.io/saved?email=${e}`),o=await t.json(),{total_co2:r,green_step:a}=o;return{total_co2_user:r}})(r),t=(e=>{e>20&&(e=20);let t="";for(let o=0;o<e;o++)t+="ðŸŒ³";return t})(e);document.getElementById("link-subscribe").href+=`?referral_code=${r}`;const o=`${t.toString()} I've saved ${e} kg of CO2. Help me complete all steps here https://cubbit.io/removemyco2?referral_code=${r}`,c=`${t.toString()} I've saved ${e} kg of CO2. Help me complete all steps here:`;document.getElementById("total_co2_user").innerHTML=e;const n={fbShareLink:`https://www.facebook.com/sharer/sharer.php?u=https://cubbit.io/removemyco2?referral_code=${r}&quote=${o}`,twShareLink:`https://twitter.com/intent/tweet?text=${c}&url=https://cubbit.io/removemyco2?referral_code=${r}`,liShareLink:`https://www.linkedin.com/sharing/share-offsite/?url=https://cubbit.io/removemyco2?referral_code=${r}&quote=${o}`,reShareLink:`https://www.reddit.com/submit?url=https://cubbit.io/removemyco2?referral_code=${r}&title=${o}`,waShareLink:`https://wa.me/?text=${o}`},s=e=>{switch(e){case"fbShareLink":return"facebook";case"twShareLink":return"twitter";case"liShareLink":return"linkedin";case"reShareLink":return"reddit";case"emailShareLink":return"email";case"waShareLink":return"whatsapp";default:return""}},l=async e=>{const t=s(e);return await fetch("https://api-co2.cubbit.io/save-social",{method:"POST",body:JSON.stringify({email:r,social_media:t,amount:1}),headers:a}),"Sent"};Object.keys(n).forEach((e=>{document.getElementById(e).addEventListener("click",(()=>{window.open(n[e],"_blank");const t=l(e);t&&console.log(t)}))}));const i=()=>navigator.clipboard.writeText(`https://cubbit.io/removemyco2?referral_code=${r}`);document.getElementById("copy_btn").addEventListener("click",(()=>{i(),Toastify({text:"Copied to clipboard",position:"center",backgroundColor:"linear-gradient(to right, #00b09b, #96c93d)",gravity:"bottom",duration:1e3}).showToast()}))}}))};